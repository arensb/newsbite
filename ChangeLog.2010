2010-11-13  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/item.php (Bug fix): use "[no title]" if title
	consists entirely of whitespace.

2010-11-04  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings/wings.jsh: Deal better with null feed titles,
	in sorting and displaying.

	* htdocs/skins/wings/wings.jsh: Deal better with empty (null)
	summaries/contents. Remember page position and jump back to it
	when returning to a page.

	* htdocs/skins/wings/style.css: Use "visible" class to manage
	which pages are visible, rather than hard-coding it in JavaScript.

2010-11-03  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.php, htdocs/skins/fancy/item.php: Escape
	URLs.

	* htdocs/skins/wings/wings.jsh: Listen for when we're on/offline.
	Article page uses "[no title]" when article has no title.

	* htdocs/skins/wings/style.css, htdocs/skins/wings/wings.jsh,
	htdocs/skins/wings/feeds.php, htdocs/skins/wings/wings.manifest:
	status_msg(), to display timely status messages at the top of the
	page.

	* htdocs/skins/wings/Makefile: Code to generate different app
	manifests for different devices.

2010-11-01  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings/wings.jsh (minor) Comment.

	* htdocs/skins/wings/style.css: Add colors to pages, for
	debugging. Make articles look prettier.

2010-10-30  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings/wings.jsh: Rename show_first_item to
	show_items. Make sure each article has a title, so we can click on
	it.

2010-10-28  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Removed plugins/thumbnail.php.

	* MANIFEST: Added wings/js/load_module.js

	* htdocs/skins/wings/style.css, htdocs/skins/wings/wings.jsh,
	htdocs/skins/wings/feeds.php: article-page now works (first draft)

	* htdocs/skins/fancy/view.jsh: Be consistent: always return a
	value (not sure whether this is the right one, though).

	* htdocs/skins/wings/js/CacheManager.js: Removed some trace
	statements.

	* htdocs/skins/wings/wings.jsh: Feed page now works (first draft).
	On index page, feeds sorted by title (first draft). Separate
	objects for the page-specific data for each page.

	* plugins/xml-media.php, plugins/thumbnail.php: Combined the
	"media" XML namespace parser and the "media:thumbnail" plugin,
	since they're really just parts of the same thing.

2010-10-27  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings/js/Template.js: Template expansion is far
	smarter now.

2010-10-26  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/database.inc (bug fix): Don't try to parse time_t as a date.

	* htdocs/skins/wings/wings.jsh: Show number of unread articles in
	each feed in index list. Sort feeds by title (first draft).

	* htdocs/skins/wings/js/classes.js: Merged changes from fancy
	skin.

	* htdocs/skins/fancy/js/classes.js: Return something every time,
	even on success.

	* lib/database.inc: Return timestamps as time_t, like the comments
	say, and not as human-readable strings.

	* htdocs/feeds.php (bug fix): read/unread counts were showing up
	as null.

	* htdocs/skins/wings/js/CacheManager.js: When updating feeds,
	store the new value correctly (indexed by feed ID).

	* htdocs/skins/wings/wings.jsh,
	htdocs/skins/wings/js/CacheManager.js: Bludgeoning things into a
	semblance of working.

	* htdocs/skins/wings/js/xhr.js: Declare createXMLHttpRequest, to
	make JS console shut up.

	* htdocs/skins/wings/feeds.php: Only feed manifest file to mobile
	apps.

	* htdocs/skins/wings/wings.manifest: Use relative paths.

	* htdocs/skins/wings/js/load_module.js: Copied from "fancy" skin.

2010-10-22  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings/wings.jsh: First steps toward functioning
	feed page.

	* htdocs/skins/wings/js/CacheManager.js: First stab at
	get_items().

	* htdocs/skins/wings/feeds.php: Added various headers related to
	standalone iPhone app. Added links on feed page, for testing.

	* htdocs/skins/wings/wings.manifest: New draft. Attempt to make
	caching work correctly.

	* MANIFEST: Added, rearranged images.

	* htdocs/skins/wings/images,
	htdocs/skins/wings/images/splash-ipad-landscape.png,
	htdocs/skins/wings/images/gray-bg.jpg,
	htdocs/skins/wings/images/splash-ipad.png,
	htdocs/skins/wings/images/icon.png,
	htdocs/skins/wings/images/splash.png,
	htdocs/skins/wings/style.css: Added images. Moved gray-bg.jpg to
	"images". Adjust style.css accordingly.

2010-10-18  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/update.php: Minor cleanup.

	* lib/net.inc: Minor cleanup.

	* htdocs/view.php: Got rid of comments and code about stuff now
	being done by HTMLPurify.

	* htdocs/skins/wings/wings.jsh: Moving toward getting away from
	the remnants of ItemCache, in favor of CacheManager.

	* htdocs/.htaccess: Turn on support for sending pre-compressed
	files.

2010-10-16  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/net.inc (bug fix) Close the handle for feeds that have given
	an HTTP/curl/whatever error.

2010-10-14  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Added missing files.

	* htdocs/.htaccess: Removed "Require valid-user" line that forced
	logging in each time.

	* htdocs/skins/default/abort.php: Merged from fancy skin.

	* htdocs/skins/fancy/abort.php: Set $skin_dir, so the rest of the
	template works.

	* htdocs/skins/fancy/view.php: Removed some old experimental
	remnants.

	* lib/net.inc: Shuffle feeds before updating, due to timeout.
	(bug fix) When resorting to the $PARALLEL_UPDATES == 1 hack,
	return so we don't update twice.

	* INSTALL: Mention timezone php.ini setting.

2010-10-13  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/net.inc: Propagate error messages better.

	* lib/parse-feed.inc (minor) Removed "to do" comments.

	* htdocs/.htaccess: Add type for .manifest files, for standalone
	iPhone app.

	* htdocs/skins/wings/feeds.php: Added some meta tags for
	standalone iPhone app. Feed subtitle is h2 instead of div.

	* htdocs/skins/wings/wings.jsh (minor) Rearranged comments a bit.

	* htdocs/skins/wings/style.css: Playing around with style.

	* htdocs/skins/wings/wings.manifest: First draft of manifest, for
	standalone iPhone app.

	* htdocs/skins/wings/gray-bg.jpg (added)

2010-10-12  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Added htdocs/skins/wings/js/classes.js.

	* htdocs/skins/wings/wings.jsh: Added magic Emacs mode string.
	Start displaying stuff on the feed page.

	* htdocs/update.php: Got rid of the stupid +xml hack for JSON
	output, since it's not needed anymore. Better error-reporting.

	* Makefile: Silent recursion. I don't need to see it each time.

	* htdocs/skins/fancy/feeds.jsh, htdocs/skins/fancy/view.jsh: Emacs
	magic mode string.

	* htdocs/skins/wings/feeds.php: Fleshed out the feed page a bit.

	* htdocs/skins/wings/style.css: Style for various parts on the
	feed page.

	* lib/common.inc, lib/net.inc, lib/parse-feed.inc: "To do"
	comment.

2010-10-11  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Added wings Makefile.

	* htdocs/skins/wings/js/classes.js: Copied from fancy skin.

2010-10-08  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings/Makefile, htdocs/skins/fancy/Makefile:
	Make.depend depends on JS source files, so it gets rebuilt.

	* htdocs/skins/wings/wings.jsh: Start transitioning from
	ItemCache.js to CacheManager.js. Some sketchy status messages
	while waiting for stuff to load. display_feeds() now takes no
	arguments; assumes that 'feeds' holds list of feeds.

	* htdocs/skins/wings/js/CacheManager.js: Fleshed out CacheItem
	class. Threw that out the window in writing
	CacheManager.get_feeds() and its callback.

	* htdocs/skins/wings/js/ItemCache.js: Wrap JSON.parse() in a
	try{}.

	* htdocs/skins/wings/js/xhr.js: createXMLHttpRequest: perform the
	compatibility test only once, at compile time, and define an
	appropriate function, rather than perform the test each time we
	create an XMLHttpRequest. get_json_callback_batch: wrap the
	JSON.parse() in a try{}, in case the server sent us bad JSON.

	* htdocs/skins/wings/Makefile: Declare "clean" and "depend" as
	phony. Make cleaner.

2010-10-06  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Forgot to add wings.js

	* MANIFEST: Added some missing files.

	* plugins/xml-content.php (bug fix): Clean up HTML in
	<content:encoded> sections.

2010-10-03  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/view.php, htdocs/feeds.php, lib/common.inc,
	lib/xml-output.inc: Moved xmlify() and print_xml() out of
	lib/common.inc, and into their own file.
	Load this only when needed.
	Oh, and add a Content-type header.

	* htdocs/skins/wings/js/ItemCache.js, htdocs/view.php,
	htdocs/feeds.php: Deleted "jsonr" nonsense; it's just ordinary
	json.

	* htdocs/skins/wings/js/ItemCache.js: Made ItemCache more of an
	object, with class methods. Removed reference to get_feeds(),
	which no longer exists.

	* htdocs/skins/wings/wings.jsh: Move some stuff out into
	ItemCache, since it can now handle it.

	* htdocs/skins/wings/js/xhr.js: Removed garbage related to the XML
	hack.

	* MANIFEST: Added htdocs/skins/wings/js/ItemCache.js.

	* Makefile: Removed traces of Smarty.

	* htdocs/lib/common.inc: Use json_encode() if possible. Define it
	only on those machines that don't have it.

2010-10-02  Andrew Arensburger  <arensb@moist.ooblick.com>

	* Makefile: List of directories with recursive targets.

	* htdocs/skins/wings/js/ItemCache.js: First working draft.
	ItemCache is now an object, playing at being a class.

	* htdocs/skins/wings/wings.jsh: Use JSON.parse() to parse feed
	list in local storage. Moved fetch_feeds() out ItemCache.

	* htdocs/skins/wings/feeds.php: Anal-er HTML header. Added tools
	page. Added link to tools page. Added debug div.

	* htdocs/skins/wings/js/xhr.js: Typo.

	* htdocs/lib/net.inc: Added another error message.

	* htdocs/lib/common.inc: If json_encode() exists (it's in the json
	PHP module), just use that.

	* htdocs/lib/common.inc: jsonify: quote hash keys, to make
	JSON.parse() happy. Quote them with double-quotes, to make
	Mozilla's JSON.parse() happy. Removed smarty_function_jsonify().

2010-09-28  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings/js/ItemCache.js: First draft of local cache
	manager.

2010-09-27  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Added new files for "wings" skin.

	* htdocs/skins/wings: First draft.

	* htdocs/skins/wings/Template.js: Copied Template class from
	mobile skin.

2010-09-26  Andrew Arensburger  <arensb@moist.ooblick.com>

	* Makefile: Make the wings skin.

	* htdocs/feeds.php: Fetch inactive feeds as well as active ones.

2010-09-21  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings/debug.js, htdocs/skins/wings/xhr.js: Copied
	from fancy skin.

2010-09-20  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/editfeed.php,
	htdocs/skins/fancy/unsubscribe.php: Sanitize feed title, subtitle,
	description.

	* htdocs/unsubscribe.php: Load hooks, so skins can take advantage
	of them.

	* htdocs/editfeed.php: Load hooks, so skins can take advantage of
	them.

	* htdocs/skins/fancy/view.php: Start sanitizing HTML before
	displaying.

	* plugins/htmlpurifier.php: "clean-html" hook (and hence
	htmlpurify()) now only takes one argument.

	* htdocs/view.php: Load hooks, so that skins can take advantage of
	them.

	* lib/parse-feed.inc, lib/hooks.inc: Moved add_xml_handler from
	parse-feed.inc to hooks.inc, so that hooks in other scripts don't
	barf.
	"clean-html" hook now only takes one argument.

	* htdocs/skins/fancy/feeds.jsh: Fixed title in comment.

2010-09-15  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/net.inc: More debuggish error message when some updates
	fail.

	* htdocs/skins/fancy/view.jsh: Cleaned up comments and debugging
	statements.
	(annoyance fix) When collapsing an item, make sure the top is
	visible.

	* INSTALL: Say how to lengthen PHP execution time, for when there
	are lots of feeds to update.

	* htdocs/update.php (bug fix): set the output format correctly
	under cron. Clearer error message in console format.

2010-09-14  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/config.inc.sample: Added HTMLPurifier.

	* plugins/htmlpurifier.php: More verbose installation
	instructions.

	* INSTALL: Took out Smarty. Added HTMLPurifier.

	* htdocs/view.php: Added URL transforms for iPad.

2010-09-13  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/view.php: Typo: missing comma.

	* htdocs/view.php: Added a mobile link for abcnews.go.com.

	* MANIFEST: Added HTMLPurifier.

	* plugins/htmlpurifier.php, lib/parse-feed.inc: Added HTMLPurifier
	plugin. Added "clean-html" hook.

	* lib/common.inc: Clean up Smarty remnants. When referring to a
	template, don't include filename extension.

	* htdocs/loadopml.php, htdocs/index.php, htdocs/editfeed.php,
	htdocs/view.php, htdocs/addfeed.php, htdocs/setskin.php,
	htdocs/update.php, htdocs/unsubscribe.php: Clean up Smarty
	remnants.
	When referring to a template, don't use a filename extension.

	* skins/fancy/view.php, skins/fancy/feeds.php,
	skins/fancy/item.php, skins/fancy/view.css,
	skins/fancy/feed-title.php, skins/default/item.php,
	skins/default/view.php, skins/default/view.css,
	skins/default/feed-title.php, skins/default/feeds.php: Clean up
	Smarty remnants. When referring to a template, don't use a
	filename extension.

	* lib/skin.inc: Assume that template name has no extension. Added
	fetch(), to get text of an expanded template. Cleaning up Smarty
	remnants.

	* lib/config.inc.sample: Removed Smarty configuration.

2010-09-09  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/item.php: Forgot an iPad button.

	* htdocs/skins/fancy/item.php: Buttons on the left, for iPad.

2010-09-08  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/smarty, htdocs/skins/fancy/feed-title.tpl,
	htdocs/skins/fancy/abort.tpl, htdocs/skins/fancy/editfeed.tpl,
	htdocs/skins/fancy/view.tpl, htdocs/skins/fancy/addfeed.tpl,
	htdocs/skins/fancy/setskin.tpl,
	htdocs/skins/fancy/unsubscribe.tpl, htdocs/skins/fancy/feeds.tpl,
	htdocs/skins/fancy/item.tpl, htdocs/skins/fancy/opml.tpl,
	htdocs/skins/default/feed-title.tpl,
	htdocs/skins/default/abort.tpl, htdocs/skins/default/editfeed.tpl,
	htdocs/skins/default/view.tpl, htdocs/skins/default/addfeed.tpl,
	htdocs/skins/default/setskin.tpl,
	htdocs/skins/default/unsubscribe.tpl,
	htdocs/skins/default/feeds.tpl, htdocs/skins/default/item.tpl,
	htdocs/skins/default/opml.tpl (deleted)

	* TODO, lib/skin.inc, MANIFEST: Removing even more Smarty bits.

	* htdocs/skins/fancy/feeds.php: feeds.php somehow fell through the
	cracks. Forked from feeds.tpl.

2010-09-06  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Added default skin PHP files.

	* htdocs/skins/default/editfeed.php,
	htdocs/skins/default/view.php, htdocs/skins/default/addfeed.php,
	htdocs/skins/default/setskin.php, htdocs/skins/default/feeds.php,
	htdocs/skins/default/item.php,
	htdocs/skins/default/feed-title.php: Converted default template
	from Smarty to PHP.

	* htdocs/skins/fancy/editfeed.php: Added $feed to list of cached
	variables. Fixed a missing </td> Cleaned up Smarty remnants.

2010-09-05  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/default/abort.php,
	htdocs/skins/default/setskin.php,
	htdocs/skins/default/unsubscribe.php: Back-copied more templates
	that are identical between fancy and default skins.

	* MANIFEST: Added new PHP skin files to manifest.

	* Makefile: Started working on "install:" target.

	* lib/skin.inc: Hacks to make skin work with plain PHP skins
	instead of Smarty. Added 'skin' and 'skin_vars' to variables
	available to the skin. Added _include() function, to include
	sub-templates.

	* htdocs/skins/default/opml.php: Copied from fancy skin, since
	they're identical.

	* htdocs/skins/fancy/abort.php, htdocs/skins/fancy/editfeed.php,
	htdocs/skins/fancy/view.php, htdocs/skins/fancy/addfeed.php,
	htdocs/skins/fancy/setskin.php,
	htdocs/skins/fancy/unsubscribe.php, htdocs/skins/fancy/item.php,
	htdocs/skins/fancy/opml.php, htdocs/skins/fancy/feed-title.php:
	Converted "fancy" skin from Smarty to plain PHP.

2010-09-01  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/feeds.jsh, htdocs/skins/fancy/view.jsh
	htdocs/skins/fancy/js/debug.js: Moved declaration of mark_read and
	mark_request from js/debug.js to view.jsh, where they
	belong (d'oh!)
	Empty versions of debug() and clrdebug() for when debugging isn't
	turned on.

2010-08-25  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy2: Deleting fancy2 skin: not using it.

2010-08-21  Andrew Arensburger  <arensb@moist.ooblick.com>

	* plugins/google_news.php: Hook to strip Google News wrapper; have
	links to stories go directly to the story.

2010-08-17  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/config.inc.sample, MANIFEST: Renamed config.inc to
	config.inc.sample.

	* Makefile: 'make dist' now makes all.

2010-08-09  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/skin.inc: Allow user to set skin as a GET parameter.

	* MANIFEST: Added files from breaking up the *.js files.

2010-08-08  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy, htdocs/skins/fancy/view.js,
	htdocs/skins/fancy/feeds.js, htdocs/skins/fancy/js,
	htdocs/skins/fancy/js/load_module.js,
	htdocs/skins/fancy/js/defer.js, htdocs/skins/fancy/js/debug.js,
	htdocs/skins/fancy/js/keybindings.js,
	htdocs/skins/fancy/js/classes.js, htdocs/skins/fancy/js/xhr.js,
	htdocs/skins/fancy/Makefile, htdocs/skins/fancy/view.jsh,
	htdocs/skins/fancy/feeds.jsh, TODO, Makefile: Split
	htdocs/skins/fancy/*.js into separate JS modules. These are then
	combined together using cpp. Makefile stuff to do the above.

2010-07-31  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/feed-title.tpl, htdocs/skins/fancy/feeds.tpl,
	htdocs/skins/fancy/index.css, htdocs/skins/fancy/feeds.js:
	Toggling visibility of feed details/tools: instead of modifying
	each row, just toggle a class on the table, and let the changes
	propagate through CSS.

	* htdocs/skins/fancy/view.js: Minor tweaks.

	* Makefile: Generate ChangeLog.svn.

	* htdocs/skins/fancy/feeds.js: Add key bindings (copied from
	view.js).

	* htdocs/skins/fancy/feeds.tpl: Fixed improperly-closed element.

	* htdocs/markitems.php: Commented out the "+xml"/CDATA hack. Let's
	see how well this works.

2010-07-25  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/parse-feed.inc (bug fix): Surprisingly, strtotime() can't
	handle commas in dates.

2010-06-10  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/style.css: Attempt to make JavaScript-only
	links look more like ordinary ones.

	* htdocs/skins/fancy/feed-title.tpl, htdocs/skins/fancy/feeds.tpl,
	htdocs/skins/fancy/index.css, htdocs/skins/fancy/feeds.js: Don't
	display feed details or tools by default. Add buttons to toggle
	them on and off.

	* htdocs/skins/fancy/view.js: More key-related cleanup: Submit
	form more correctly (albeit still hackishly). Removed some
	debugging code from handle_key().

	* htdocs/skins/fancy/view.tpl: Commented out the key debug box.
	Moved login session information to the bottom of the page.

2010-06-09  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.js: Comments. Fixed binding for
	expand_all().

	* htdocs/skins/fancy/view.js: More key bindings.
	Added bind_key().
	Made collapse_all() and expand_all() play nice with toggle_pane(),
	by having them all call set_pane().
	Added keytab. Have handle_key() check the keytab.

	* MANIFEST: Add profiler module to distribution.

	* htdocs/skins/fancy/view.css: Be more explicit about not showing
	missing panes in non-collapsible items.

2010-06-08  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.js, htdocs/skins/fancy/view.tpl: Start
	adding keyboard commands. view.js:init() adds an event listener
	for keyboard events. handle_key() decides what to do on keypress.
	Added collapse_all() and expand_all().
	(efficiency) is_in_class() uses regexp matching rather than
	decomposing an element's class string into an array.

	* htdocs/skins/fancy/view.css: More specific CSS rules, to avoid
	collapsing/expanding things that shouldn't.

2010-06-07  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/markitems.php: Make abort message look slightly less
	unreasonable.

2010-06-06  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.js, htdocs/js/profiler.js: Moved
	Profiler class out of view.js, and into its own file. Added
	load_module(), to add these sorts of things as needed.

2010-06-04  Andrew Arensburger  <arensb@moist.ooblick.com>

	* TODO: Don't use synchronous AJAX fetch: the code looks simpler,
	but in fact raises more problems than it's worth: hard to detect
	errors, locks up the JS engine, etc.

	* htdocs/view.php: The Onion's mobile site plays nice after all.

2010-06-03  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Switched to Smarty version 2.6.26, due to a security
	hole in 2.6.9.

	* htdocs/index.php: Sort feeds by name; lowercased, and with "the"
	and "a" at the end.

	* MANIFEST: Forgot to include plugins/no-style.php in manifest.

2010-06-02  Andrew Arensburger  <arensb@moist.ooblick.com>

	* plugins/no-style.php: Strip out retardedness in the FYI feed.

	* plugins/google_news.php: Rename function to google_news_hook(),
	to match the filename.

	* lib/parse-feed.inc: Removed Top 10 Conservative Idiots hack,
	since it was breaking another, more active feed.

	* lib/parse-feed.inc: Minor comment.

	* plugins/pheedo-ads.php, plugins/origlink.php,
	plugins/zemanta.php, plugins/bugs.php, plugins/slashdot.php,
	plugins/feedburner.php, plugins/gocomics.php,
	plugins/thumbnail.php, plugins/ads.php, plugins/google_news.php,
	plugins/wordpress.php, htdocs/view.php, lib/parse-feed.inc,
	MANIFEST: Moved all of the hooks out of lib/parse-feed.inc and
	htdocs/view.php, and into their own plugins.
	defeedburn()ination now happens when the RSS feed is parsed, not
	when the items are displayed.

2010-06-01  Andrew Arensburger  <arensb@moist.ooblick.com>

	* plugins/xml-content.php, lib/parse-feed.inc, lib/hooks.inc,
	lib/database.inc, lib/config.inc, MANIFEST: Changed the way
	run_hooks() is called, to reduce the amount of pointless copying,
	as well as careless mistakes (since it's rather fiddly about
	references).
	Added run_hooks() calls to allow hooks for the major parts of
	feeds: summary, content, item, and feed.
	Updated xml-content.php to call run_hooks() the new way.
	Added PLUGIN_DIR config constant.
	Added plugins/xml-dc.php and plugins/xml-content.php to the
	distribution.

2010-05-30  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.css: Make sure the summary of an item
	doesn't take up too much screen real estate.

2010-05-29  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/parse-feed.inc, plugins/xml-dc.php: Moved Dublin Core stuff
	out of lib/parse-feed.inc and into plugins/xml-dc.php. Cleaned up
	list of namespaces in parse-feed.inc.

	* lib/parse-feed.inc, plugins/xml-content.php: Moved the RSS
	Content Module stuff into its own plugin.

	* lib/hooks.inc: Show errors when loading plugins.

	* plugins, plugins/xml-media.php, lib/parse-feed.inc,
	lib/hooks.inc, lib/config.inc, MANIFEST: Added infrastructure for
	hooks and plugins: plugin directory, lib/hooks.inc.
	Added a config variable for where the plugins go.
	Added xml-media.php plugin, for the XML "media" namespace.
	Moved "media" stuff out of lib/parse-feed.inc and into the
	xml-media plugin.

	* htdocs/skins/fancy/view.css: Style for thumbnail images.

2010-05-26  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/index.php: In the main feed index, sort feeds by nickname
	or name, to make them easier to find on the iPhone/iPad, since
	@#$!ing Mobile Safari doesn't allow searching within the page
	being displayed.

	* lib/parse-feed.inc: Cleaned up reference table a bit. Added
	thumbnail_hook, to display thumbnail image, when it's available.
	Added media: namespace handler.
	(bug fix): Pass the proper context to handlers. Added hack for
	<summary>, for cracked.com feed.

2010-05-25  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/parse-feed.inc: Stubs for Yahoo media: namespace. Fixed hook
	to clean ads and bugs out of WaPo feeds.

	* lib/database.inc (bug fix): Error in SQL statement.

	* MANIFEST: Added fix-schema-r367.sql to distro.

	* lib/database.inc: Update feeds.last_update, to measure
	staleness.

2010-05-24  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/parse-feed.inc: Added "summary" section to RSS, since at
	least one feed uses that for actual content. Commented out the
	"guest Atom in non-Atom file" section, since it was confusing the
	XML parser.
	(bug fix): removing Pheedo ads.

	* htdocs/skins/fancy/index.css: A less unpleasant color for stale
	feeds.

	* fix-schema-r367.sql: Patch an existing installation to match the
	new SQL schema.

	* schema.sql: Add indexes to speed things up.

	* schema.sql: Set default charset on all tables.

2010-05-23  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/feeds.tpl, htdocs/skins/fancy/index.css,
	htdocs/skins/fancy/iphone.css, htdocs/index.php, htdocs/view.php:
	Minor tweaks for iPod/iPad.

	* lib/parse-feed.inc: Put back the butt-ugly APOD hack removed in
	r338: turns out it's still needed.

2010-05-22  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/feeds.tpl, htdocs/skins/fancy/index.css,
	lib/database.inc, lib/config.inc, lib/net.inc: Display inactive
	and stale feeds.
	Added $STALE_DAYS config variable to define how long a feed must
	go without updates to be considered stale.
	db_get_feed(), db_get_feeds() now return a 'stale' field.
	'feeds.last_updated' now represents the time when the most recent
	article was posted.

	* htdocs/skins/fancy/feeds.tpl, htdocs/skins/fancy/index.css,
	htdocs/index.php: Display inactive feeds in the main feed list.
	But show them grayed out.

	* htdocs/update.php: Added switches for console output, so that
	cron job can print errors. Better error-reporting.

	* lib/net.inc: update_feed() more consistent about returning error
	status.

	* lib/parse-feed.inc: Improved ad-removers.

	* Makefile: Check for syntax errors in PHP scripts.

	* lib/parse-feed.inc: Pheedo ads: simpler rule.

2010-05-21  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/parse-feed.inc: Tweak WaPo bugs and ads.

	* htdocs/skins/fancy/view.js (bug fix): nonexistent JavaScript
	variable.

2010-05-19  Andrew Arensburger  <arensb@moist.ooblick.com>
	* htdocs/skins/fancy/view.js, htdocs/skins/fancy/item.tpl,
	htdocs/skins/fancy/view.css, htdocs/skins/fancy/ipad.css,
	htdocs/skins/fancy/iphone.css: Remove backgrounds and gradients on
	iPhone/iPad, to speed up drawing time.
	Don't use the "state" attribute on read/unread items. Rather, use
	"class=item-read".
	On iPad, add a second set of checkboxes on the left, for
	convenience.

	* htdocs/skins/fancy/view.js, htdocs/skins/fancy/item.tpl: Use
	event listener rather than onclick for marking items as
	read/unread.

2010-05-16  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/addfeed.php:

	* MANIFEST: Include ChangeLogs in the distribution.

	* htdocs/skins/fancy/view.js, htdocs/skins/fancy/item.tpl:
	Modernize the way toggling between content and summary is handled:
	use addEventListener() instead of onclick. Don't use "which="
	attribute; use "show-content" or "show-summary".
	In JS, use "foo.className" instead of "foo.getAttribute("class")".
	Misc. bug fixes.
	Now works in Firefox, desktop Safari, and Mobile Safari. Still
	don't care whether it works in IE.

	* htdocs/skins/fancy/view.css: Whether the content or summary pane
	is displayed is no longer controlled by the "which=" attribute,
	but by whether the div:content-panes also has class "show-content"
	or "show-summary".

	* htdocs/skins/fancy/addfeed.css, htdocs/skins/fancy/addfeed.tpl,
	htdocs/addfeed.php:

	* htdocs/skins/fancy/view.js, htdocs/skins/fancy/item.tpl,
	htdocs/skins/fancy/view.css: (bug fix) Make expand/collapse
	summary/content work in Safari.

	* lib/skin.inc: Don't need the Smarty configs directory, AFAICT.

	* lib/net.inc: Minor cleanup.

	* htdocs/update.php: Remove some old comments.

	* php.ini: Moved sources around.

2010-05-15  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/smarty/configs (deleted): Not needed, AFAICT.

2010-05-14  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/parse-feed.inc: Removed hack for old APOD feed. Collapsed
	duplicate case statements in RSS parser. Fixed some comments.

2010-05-13  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/login.php: Go back to silently redirecting, since login
	seem to be working. Some cleanup. Lots of commentary.

	* lib/common.inc: Go back to silently redirecting, since login
	seem to be working.

	* htdocs/addfeed.php: First stab at subscribing to a site, given
	one of its page URLs.

	* htdocs/view.php: thinkprogress.org now has a mobile site.

	* htdocs/opml.php, htdocs/loadopml.php: Don't include config.inc:
	it's already included in common.inc

2010-05-10  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/markitems.php, htdocs/skins/fancy/view.js,
	htdocs/skins/fancy/view.tpl, htdocs/index.php, htdocs/login.php,
	htdocs/editfeed.php, htdocs/view.php, htdocs/addfeed.php,
	htdocs/setskin.php, htdocs/update.php, htdocs/unsubscribe.php,
	htdocs/feeds.php: "common.inc" now includes "config.inc", but all
	scripts already included both. Removed the redundant line.

2010-05-08  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/common.inc (bug fix): fixed check for $CRON environment
	variable.

	* htdocs/skins/fancy/view.js: Functions for manipulating a DOM
	element's class list. Use is_in_class() for finding checkbox's
	item ancestor.

2010-05-07  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/common.inc: Allow cron jobs to bypass authentication.

	* htdocs/view.php: Another mobile site: factcheck.org.

	* htdocs/addfeed.php: Implementation/"to do" comment.


2010-05-06  Andrew Arensburger  <arensb@moist.ooblick.com>
	* lib/parse-feed.inc: Commented out an obsolete ad.

	* lib/common.inc: Debugging: show me what's happening with the
	login stuff. Renamed user/expiration variables.

	* htdocs/skins/fancy/view.tpl: Show user and cookie expiration,
	for debugging.

	* htdocs/skins/fancy/view.css: Pretty gradient in Safari as well.

	* htdocs/skins/fancy/iphone.css: Fixed "to do" comment.

	* htdocs/view.php: Set auth_user, auth_expiration, for debugging.

	* htdocs/login.php: Don't redirect (for now). Show me what's
	happening, for debugging.

	* htdocs/.htaccess: Rearranged a bit. Less ooblick-specific.

	* MANIFEST: Added login.php.

2010-05-03  Andrew Arensburger  <arensb@moist.ooblick.com>

	Adding login form and cookie-based authentication, because
	iPhone/iPad can't seem to remember the login data.

	* htdocs/skins/fancy/view.js: Removed a troublesome trace statement.

	* htdocs/index.php: include "common.inc", to get all the necessary bits.

	* htdocs/login.php (added): login form.

	* htdocs/.htaccess: More expanded example of what this should look
	like.

	* lib/common.inc: Check for valid cookie, or redirect to login form.

	* lib/config.inc: Define SERVER_SECRET, USERNAME, PASSWORD,
	AUTH_COOKIE_DURATION for login stuff.

2010-05-03  Andrew Arensburger  <arensb@moist.ooblick.com>

	* MANIFEST: Added iPad style.

2010-05-02  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.tpl, htdocs/skins/fancy/view.js: Added
	profiling.

	* htdocs/view.php: Quick and dirty hack to not convert URLs to
	mobile versions on iPad.

	* lib/database.inc: First draft of db_mark_url().

	* htdocs/skins/fancy/view.css: Removed useless rule.

	* htdocs/markitems.php: Added a "to do" item.

2010-04-25  Andrew Arensburger  <arensb@moist.ooblick.com>

	* Makefile: templates_c no longer in distribution.

	* htdocs/view.php: Comment out normalization that doesn't work as
	wanted.

	* htdocs/.htaccess: Remove the PHP4 clause, since it's officially
	unsupported.

	* SCHEMA.sql: fixed typo.

	* lib/skin.inc: minor style.

	* lib/config.inc: Reworded instructions a bit.

	* INSTALL: Much more detailed instructions.

	* MANIFEST: Removed Smarty runtime directories; these will be
	created manually at install-time.

2010-04-24  Andrew Arensburger  <arensb@moist.ooblick.com>

	* Makefile: Don't recurse into directories when creating
	distribution. This prevents distributing .svn directories, Smarty
	compiled templates, and other undesirables. In fact, distribute
	only what's in MANIFEST.

	* MANIFEST: Added missing files.

2010-03-25  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/mobile/feeds.tpl: Use Template class for feed index
	entries.

	* htdocs/skins/mobile/feeds.js: Added Template class. get_feeds()
	uses get_json_data() instead of custom handlers. Code to try to
	guess the browser type.

	* htdocs/skins/mobile/index.css: Prettier CSS on iPhone.

2010-03-14  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/database.inc: Articles expire $AUTODELETE_DAYS after their
	claimed date.

2010-03-13  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.js, htdocs/skins/fancy/item.tpl,
	htdocs/skins/fancy/view.css, htdocs/skins/fancy/view.tpl,
	htdocs/skins/fancy/iphone.css, htdocs/view.php,
	lib/parse-feed.inc, lib/database.inc, lib/config.inc:
	Checking in changes made on production site.
	Tweaks to make fancy skin look better on iPhone.
	Begin supporting multiple hacks for specific mobile platforms.
	Pass the type of mobile platform to template.
	Convert article URLs to their mobile equivalents, where possible.
	More hooks for removing web bugs and ads.
	Use "items.last_update" database field to mean "when the article
	was added to the database", and use that for ordering. IOW,
	articles get put at the end of a list as they come in, regardless
	of what the RSS file says. Then the list is read in reverse
	order (newest-first).
	Update 20 feeds in parallel by default, instead of 10.

	* TODO: Stuff to do.

	* htdocs/feeds.php: More output formats: "jsonr" (JSON without the
	Firefox hack), "xml".

	* htdocs/view.php: More output formats: "jsonr" (JSON without the
	Firefox hack), "xml".

	* htdocs/skins/mobile/feeds.js: Debuggery.

	* lib/common.inc: Added xmlify(), similar to jsonify();
	print_xml().
	
