2011-12-29  Andrew Arensburger  <arensb@moist.ooblick.com>

	* Makefile: Allow including Makefile.custom, for site-local
	customization. Use '${TAR}' instead of 'tar'.

2011-12-27  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/parse-feed.inc, lib/database.inc, lib/net.inc: More checks
	to prevent PHP errors in the log.

	* htdocs/skins/fancy/js/PatEvent.js (minor) Comment explaining
	about keybindings.

	* htdocs/skins/fancy/js/PatEvent.js: Tried adding key binding
	support. Turns out it's much harder than I thought. Backed out. A
	few minor comment changes.

	* htdocs/skins/fancy/view.jsh: Keybinding: "c" collapses or
	expands article.

	* lib/parse-feed.inc: More anal checks.

	* lib/parse-feed.inc (bug fix): Get <Seq><resource> from the right
	place. More anal tests, to get fewer error/warning messages in the
	log.

	* lib/database.inc: Don't print error messages: just save them to
	$db_errno/$db_errmsg and let the caller report them.

	* htdocs/update.php: Get rid of unused code, in particular old
	'count_display' output field.

	* lib/parse-feed.inc, lib/database.inc: More checks to reduce
	errors/warnings in log file.

	* lib/parse-feed.inc (bug) Thinko.

	* lib/database.inc (bug) db_get_feed_counts() was using a
	nonexistent column in 'items', for some reason.

	* lib/parse-feed.inc: Got rid of element_hooks: plugins make them
	obsolete. Minor cleanup: quote function names.

2011-12-25  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/feeds.php, htdocs/skins/fancy/feeds.jsh: Menu
	items to toggle empty, inactive, and stale feeds.

	* lib/database.inc: Clean up some PHP undefined references.

	* plugins/htmlpurifier.php: Increase the maximum image height,
	since failblog and friends tend to have taller images than
	HTMLPurifier default allows.

	* htdocs/skins/fancy/view.css: Glue status messages to the top of
	the screen, so they'll be visible even if user scrolls down.

	* lib/database.inc (minor) Add "to do" comment.

	* htdocs/skins/fancy/js/keybindings.js (minor) Remove unneeded "to
	do" comment.

	* Hack to add left-hand checkboxes only on iPad.

2011-12-15  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/feeds.jsh (bug fix) Fix clear_status() to
	find the feed entries properly in the table.

2011-12-13  Andrew Arensburger  <arensb@moist.ooblick.com>

	* lib/common.inc: Add Kindle to known mobile devices.

2011-12-08  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/js/CacheManager.js: New arguments for
	getitems(): allow more control over which articles we want to see.

	* htdocs/skins/fancy/view.jsh: New argument list for
	CacheManager.getitems(). Use it in redraw_itemlist(), refresh().

2011-12-03  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/js/CacheManager.js: Sort articles in
	getitems(), rather than during page initialization.

	* Skip items from nonexistent feeds (bug workaround).

2011-12-01  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.jsh: Move key bindings to "desktop
	browser only" section. Not sure if it makes sense to have key
	bindings on mobile devices.

	* htdocs/skins/fancy/js/CacheManager.js,
	htdocs/skins/fancy/view.jsh: A few tentative tweaks toward having
	the client cache which items have been read and which haven't.

2011-11-30  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.jsh: Stub function refresh() to give the
	"Refresh" button something to do.

	* htdocs/skins/fancy/view.php: view.php no longer uses a <form>.
	"Mark as read" goes in a label.

	* htdocs/skins/fancy/view.jsh: Mark in-cache items as read or
	unread when server acknowledges markitems request.

	* lib/database.inc: When looking up feeds and items, convert
	boolean fields to boolean.

2011-11-29  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/js/keybindings.js: Remove unused debugging
	code.

	* htdocs/skins/fancy/view.jsh: Switch from old crufty manual
	XMLHttpRequest stuff, to just using get_json_data().

	* lib/common.inc (bug fix) Bogus variable that I hadn't noticed
	until now.

	* htdocs/markitems.php: Remove the unused code, so that
	markitems.php is now an AJAX-only script.

	* htdocs/markitems.php: Remove unused $ok variable.

	* htdocs/skins/fancy/js/CacheManager.js,
	htdocs/skins/fancy/js/xhr.js: pget_json_data() now takes an error
	handler, which is invoked in case the request fails.

	* htdocs/skins/fancy/view.jsh: Bind events to itemlist, not to the
	entire document.

	* htdocs/skins/fancy/js/CacheManager.js (bug fix) Get the type
	right when fetching feeds from localStorage.

2011-11-28  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/js/CacheManager.js (bug fix) Messed up the
	type for 'feeds'.

	* htdocs/skins/fancy/js/CacheManager.js: First pass at keeping
	track of old entries in localStorage, with _ls_index.
	(bug fix) Fix type for 'feeds' in localStorage: it's an array, not
	a hash.

	* htdocs/skins/fancy/view.jsh: On mobile devices, open title links
	in a new window.

2011-11-27  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/wings (deleted), TODO, MANIFEST, Makefile: Deleted
	wings skin. It was a useful research side project, but has
	outlived its usefulness, and bloats the distro.

	* htdocs/skins/fancy/js/CacheManager.js: Add (first draft of)
	wrappers for localStorage.{get,set,remove}Item(). Update other
	functions to use that.

	* htdocs/skins/fancy/js/CacheManager.js: Rearrange item-related
	functions to sort of match feed-related ones.

	* htdocs/skins/fancy/view.jsh: Simplify the code, made possible by
	changes to CacheManager.

	* htdocs/skins/fancy/js/CacheManager.js: Big rewrite. Remove a
	bunch of functions that aren't needed any longer. Add others, to
	make CacheManager a proxy between the client, localStorage, and
	the server.
	feeds() just returns in-cache feeds; update_feeds() requests a new
	list from the server.
	getitems() gets in-memory items; update_items() requests new items
	from the server.
	"ihead" and "ibody" are gone, replaced simply by "item".
	CacheManager keeps in-memory information about items sorted by
	pub_date, and by ID.

2011-11-26  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/login.php: Don't display phpinfo stuff.

	* htdocs/skins/default (deleted), TODO, MANIFEST: Default skin is
	obsolete. Deleted.

	* htdocs/skins/fancy/view.jsh: Display a message when a feed is
	empty.

	* htdocs/skins/fancy/view.php: Take out special case for empty
	feed.

2011-11-25  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/view.php: Don't fetch expensive data, to save time.

	* htdocs/skins/fancy/view.jsh: Remove trace statment.

	* htdocs/skins/fancy/view.jsh, htdocs/skins/fancy/feeds.jsh: Use
	newer CacheManager interface to get feeds.

	* htdocs/skins/fancy/js/CacheManager.js: Moving toward new
	interface: added update_feeds() to update feeds from server. Added
	store_item() and get_item(), that'll probably go away or be
	heavily modified.

	* htdocs/skins/fancy/view.jsh: Declare temporary variables.

	* plugins/xml-content.php, plugins/xml-media.php,
	plugins/xml-dc.php: When referring to function names, use strings,
	not constants.

	* lib/database.inc: More pedantic input checking to make PHP shut
	up. In db_get_some_feed_items(), set a default sort order.

	* lib/common.inc: More pedantic input checking to make PHP shut
	up.

	* htdocs/skins/fancy/js/xhr.js: Declare temporary variables.

	* htdocs/skins/fancy/js/types.js: Declare temporary variables. Add
	comments to make cpp shut up about unclosed quotes.

	* htdocs/skins/fancy/view.php: More pedantic checking of values,
	to make PHP shut up.

	* htdocs/items.php, htdocs/view.php: More pedantic checking of
	arguments, to make PHP shut up.

	* Add local Emacs variables.

	* Makefile: "to do" item.

2011-11-23  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.jsh: Rename update_itemlist() to
	redraw_itemlist(), for clarity.

	* htdocs/skins/fancy/Attraction_transfer_icon.gif (added): Used in
	feeds.php/feeds.jsh.

	* htdocs/skins/fancy/view.jsh: Remove some unused functions.

	* Makefile: Don't exit on syntax error in PHP script: at least one
	of them has a known error.

	* MANIFEST: Added lib/json.inc.

	* htdocs/view.php, htdocs/items.php, htdocs/update.php,
	htdocs/feeds.php, lib/common.inc: Make $_REQUEST['o'] a common,
	standard parameter. Move it to lib/common.inc, which sets
	$out_fmt.

	* htdocs/view.php (bug fix) In JSON and XML mode, the items
	weren't being sent.

	* lib/common.inc, lib/json.inc (added): Move json_encode()
	compatibility function to a separate file.

	* htdocs/skins/fancy/feeds.jsh, htdocs/feeds.php: Don't calculate
	per-feed counts unless they're requested, with a parameter to
	feeds.php: it takes a long time to do so.

	* plugins/htmlpurifier.php: Remove Google Magnifier filter, since
	Magnifier's gone.

	* Makefile: Removed BSD-make compatibility, since it breaks GMake.

	* htdocs/skins/fancy/view.php: Add an 'itemlist' div even when
	there are no items, so that JavaScript doesn't break.

2011-11-22  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/js/CacheManager.js: Stub function for getting
	items from cache.

	* htdocs/skins/fancy/view.php: Removed old item list.

	* htdocs/skins/fancy/view.css: Don't need to mark itemlist in red
	anymore.

2011-11-21  Andrew Arensburger  <arensb@moist.ooblick.com>

	* htdocs/skins/fancy/view.jsh: init_feeds_items: try to get both
	feeds and items from the server, and only redraw the item list
	once everything has been received.

	* htdocs/skins/fancy/js/Template.js: Try to strip out extraneous
	whitespace.

	* MANIFEST: Add htdocs/items.php.

	* htdocs/items.php (added) A lot like view.php, but only supports
	JSON/XML output.

2011-11-18  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.jsh, htdocs/skins/fancy/view.php,
	htdocs/skins/fancy/feeds.jsh, htdocs/skins/fancy/js/debug.js: Get
	rid of old, hacked-up debugging/logging functions. Use
	mostly-standard window.console object.

	* TODO: Fixed some stuff, and some bugs aren't. Yay!

	* htdocs/skins/fancy/view.jsh: Working toward loading both feeds
	and items with AJAX.

	* htdocs/skins/fancy/js/types.js: Add Item.displaytitle() method.

	* MANIFEST: blue-bg.jpg no longer ships, to reduce distro size.

	* htdocs/skins/fancy/feeds.jsh: feeds.php now returns a hash, not
	an array. Adapt to that.

2011-11-11  Andrew Arensburger  <arensb@moist>

	* AUTHORS: No longer using blue-bg.jpg. Using gray-bg.jpg instead.

	* htdocs/skins/fancy/blue-bg.jpg (deleted): Not used.

	* htdocs/skins/fancy/view.jsh: Initial code for getting feeds from
	server. Dynamically add list of items from AJAX call (rather than
	static list from PHP).

	* htdocs/skins/fancy/feeds.php, htdocs/skins/fancy/feeds.jsh:
	Minor comments.

	* htdocs/feeds.php: Output a hash (indexed by feed_id) rather than
	an array.

	* htdocs/skins/fancy/view.php: Add item template. More descriptive
	variable name.

	* MANIFEST: Oops. More unused stuff.

	* htdocs/skins/fancy/purple-gradient.png (deleted), MANIFEST:
	Cleaning up some unused stuff.

2011-11-10  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.css: Limit size of feed icons (Zero
	Punctuation has a huge one).

2011-11-09  Andrew Arensburger  <arensb@moist>

	* lib/config.inc.sample: Change default skin from "default" to
	"fancy".

	* MANIFEST: Rename Events.js to PatEvent.js.

	* htdocs/skins/fancy/view.jsh: Replace addListenerByClass() with
	PatEvent. Delete addListenerByClass().

	* TODO: Nailed bug.

	* htdocs/skins/fancy/js/PatEvent.js: Major changes. Almost a
	complete rewrite.

2011-11-08  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/feeds.jsh: Events.js -> PatEvent.js

	* htdocs/skins/fancy/view.jsh: First attempt at being more AJAXy.

	* htdocs/skins/fancy/js/Events.js: Rename Events.js to PatEvents:
	hopefully a more unique name.

	* htdocs/skins/fancy/js/Events.js: DOMAttrModified hack for
	Chrome.

2011-11-06  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/feeds.jsh: Use js/Events.js

	* htdocs/skins/fancy/js/Events.js (added)

	* MANIFEST: Added Events.js

2011-11-05  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.php, htdocs/skins/fancy/feeds.php:
	Display spinner when loading stuff.

	* htdocs/skins/fancy/js/CacheManager.js: Slightly different
	construct to shut up Firefox JavaScript console warnings.

	* AUTHORS: Credits for Ajax-loader.gif.

	* MANIFEST: Add new files to distro.

	* htdocs/skins/fancy/js/CacheManager.js (bug fix) Objects weren't
	being created from cached string properly. Start loading existing
	keys in constructor.

2011-11-04  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/Ajax-loader.gif (added)

2011-11-03  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.css: Add title/collapse-bar gradients in
	Mozilla as well.

	* htdocs/skins/fancy/view.php: Write "Loading..." before articles
	have loaded.

2011-11-01  Andrew Arensburger  <arensb@moist>

	* htdocs/view.php: Don't put the list of items inside $feed,
	because that's a lot of text. This way, we have some separation
	between information about the feed (small) and the text of the
	articles (big), and can also decide to send on e but not the
	other.

	* htdocs/skins/fancy/view.php, htdocs/view.php: Pass view
	parameters to the skin a bit more rationally.

	* htdocs/skins/fancy/feeds.jsh: C-r refreshes feed list.

	* htdocs/skins/fancy/view.css: Getting ready to display #itemlist,
	where the articles will go.

	* htdocs/skins/fancy/view.jsh: Use Emacs JavaScript mode, not JS2.

	* htdocs/skins/fancy/view.php: Set feed_id, start in JS, in
	preparation for being more AJAXy.

	* htdocs/view.php: Forward feed_id, starting offset to skin.

	* htdocs/.htaccess: Better values to support compressed static
	files.

2011-10-31  Andrew Arensburger  <arensb@moist>

	* lib/database.inc: Don't update feeds.last_update in
	db_update_feed_info(). Do it only when an item is added to items.

2011-10-30  Andrew Arensburger  <arensb@moist>

	* htdocs/feeds.php, lib/database.inc: Got rid of latest_pub_date
	and latest_update. Nothing was using them anyway.

	* lib/parse-feed.inc: $url2handler[<url>][init] now takes an
	$attrs argument, in particular so that the RSS handler can tell
	which version of RSS it's dealing with.

	* lib/parse-feed.inc: Remove butt-ugly hack for Top 10
	Conservative Idiots.

	* htdocs/skins/fancy/style-js.css (deleted),
	htdocs/skins/fancy/editfeed.php, htdocs/skins/fancy/view.php,
	htdocs/skins/fancy/addfeed.php,
	htdocs/skins/fancy/unsubscribe.php, htdocs/skins/fancy/feeds.php:
	Remove style-js.css: it wasn't doing anything anyway.

	* htdocs/skins/fancy/style-nojs.css (deleted),
	htdocs/skins/fancy/editfeed.php, htdocs/skins/fancy/view.php,
	htdocs/skins/fancy/addfeed.php,
	htdocs/skins/fancy/unsubscribe.php, htdocs/skins/fancy/feeds.php:
	Remove <noscript> section: I don't care about non-JS browsers
	anymore, and besides it allegedly does nothing in XHTML:
	http://www.w3.org/wiki/HTML/Elements/noscript

	* htdocs/skins/fancy/setskin.php: Removing remnants of Smarty
	template.

	* htdocs/skins/fancy/view.php, htdocs/skins/fancy/view.jsh, TODO:
	Minor housecleaning.

	* htdocs/skins/fancy/editfeed.php (bug) Turn off form autofill on
	username and password.

	* Deleted mobile skin.

2011-10-29  Andrew Arensburger  <arensb@moist>

	* lib/database.inc: When returning a list of items, order by id as
	a tiebreaker, to ensure a consistent order.

	* htdocs/skins/fancy/feeds.jsh: Sort feeds by sortname() when
	displaying. Other minor changes.

	* htdocs/skins/fancy/js/CacheManager.js: When loading list of
	feeds from localStorage, convert list elements to Feed.

	* htdocs/skins/fancy/js/types.js: displaytitle: memoize return
	value (using _displaytitle). Better check for empty title.
	sortname: memoize return value (using _sortname). Added some real
	content (for English).

	* htdocs/skins/fancy/index.css: Remove illegal directive.

	* htdocs/skins/fancy/js/status-msg.js (minor) Indentation.

2011-10-28  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/js/types.js (added) First draft of Feed and
	Item classes.

2011-10-25  Andrew Arensburger  <arensb@moist>

	* plugins/htmlpurifier.php: Allow Google Magnifier iframes.

	* htdocs/markitems.php: Clean up broken, unnecessary, and probably
	unused HTML code.

	* htdocs/skins/fancy/view.php: Delete unused buttons.

2011-10-24  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/feeds.php: Move "Add a feed" to submenu.

	* htdocs/view.php: Escape HTML entities in $prev_link, $next_link,
	to make xmllint happier.

	* htdocs/skins/fancy/index.css: Tweak position, shadows on feed
	page menus.

	* htdocs/skins/fancy/item.php: Use HTML5 <time> attribute for
	articles' pubdates. Don't use <article> because Firefox v<mumble>
	doesn't support it yet.

2011-10-23  Andrew Arensburger  <arensb@moist>

	* plugins/htmlpurifier.php: Add YouTube videos in iframes.

	* htdocs/skins/fancy/index.css, htdocs/skins/fancy/feeds.php:
	First pass at making drop-down menus on the feeds page.

	* lib/database.inc (bug fix): Minimal feeds showing up as stale
	when they shouldn't have been.

	* plugins/htmlpurifier.php: Allow embedded Vimeo videos.

2011-10-22  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/feeds.php, htdocs/skins/fancy/feeds.jsh:
	Split main feed display into thead and tbody: keep the header line
	intact, which allows us to discard and replace the body DOM.

	* TODO: A problem seems to have fixed itself. Or something.

	* htdocs/skins/fancy/js/CacheManager.js: Minor changes.

2011-10-21  Andrew Arensburger  <arensb@moist>

	* plugins/htmlpurifier.php: Remove old YouTube filter; just use
	the standard one.

	* htdocs/skins/fancy/js/CacheManager.js: Error-checking for when
	there aren't any stored feeds. Some cleanup.

2011-10-18  Andrew Arensburger  <arensb@moist>

	* Added new fancy skin JS modules.

2011-10-16  Andrew Arensburger  <arensb@moist>

	* MANIFEST: Added arrow icon for feed tools.

	* htdocs/skins/fancy/feeds.jsh (bug fix): placeholder title for
	feeds with no title and no nickname.

	* htdocs/skins/fancy/js/CacheManager.js (added): Added
	CacheManager to manage data stored on browser.

	* htdocs/skins/fancy/feeds.php, htdocs/skins/fancy/feeds.jsh: Load
	feed list from local storage.
	Use templates for feed list display.
	Split init_feed_list() into init_feed_list() and
	redraw_feed_list().

	* htdocs/skins/fancy/js/Template.js: Copied from wings to fancy.

	* htdocs/skins/fancy/feeds.jsh: Include CacheManager class. Rename
	'feed_list' to 'feed_table', to reduce confusion a tad.

2011-10-12  Andrew Arensburger  <arensb@moist>

	* Don't include "count_display" in output: HTML is bad, m'kay?
	$ENV['CRON'] (currently) doesn't force output to be plain text if
	user doesn't want it. Add feed counts to output.

	* htdocs/skins/fancy/feeds.jsh (bug fix) Wasn't parsing JSON
	returned from update.php correctly when output was split into
	chunks, and chunks fell in the middle of a line.
	Update for new table layout.

2011-10-09  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/feeds.jsh: Header cells get the same column
	classes as data cells.

	* htdocs/skins/fancy/index.css, htdocs/skins/fancy/feeds.php,
	htdocs/skins/fancy/feeds.jsh: New, more AJAXy feed list: load the
	list after the page has loaded, rather than in the PHP script.

	* htdocs/feeds.php: Include 'stale' in output.

2011-10-05  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/item.php, htdocs/skins/fancy/view.css: Add
	gradient to expand/collapse bars.

2011-07-23  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/feeds.php: Rearrange the "has-JS" and
	"doesn't-have-JS" stylesheets, so that more CSS files can be
	loaded in parallel. Remove the status messages in msglist that
	were used for testing. Add header row to feeds2.

2011-07-22  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/feeds.php: Add a viewport to the main feed
	page, for Android.

	* htdocs/skins/fancy/feeds.jsh: Remove a couple of extraneous
	variable lookups.

	* htdocs/skins/fancy/js/xhr.js: Imported xhr.js from wings skin.
	Adds better Chrome support (ORLY?), adds get_json_data().

2011-07-15  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.jsh: Can now press 'd' to mark the
	current item as read/unread. Broke mark_item() up into
	mark_item1() (common stuff), button_mark_item(), and
	key_mark_item().

2011-07-14  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.css: Better look for current item.

2011-07-13  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.php, htdocs/skins/fancy/view.jsh: Clean
	up key binding code a bit.
	Pass variables from PHP to JS (just whether the browser is mobile,
	for now).
	Only use "current item" code on desktop.

	* htdocs/skins/fancy/view.css, htdocs/skins/fancy/view.jsh:
	Started adding code for marking an item as read from a keybinding.
	Removed Google +1 button remnant.

	* MANIFEST: Added wings manifest.h, so that 'make' doesn't break.

	* htdocs/skins/fancy/view.php, htdocs/skins/fancy/item.php: Backed
	out adding Google +1 button, for performance reasons.

2011-07-10  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.php, htdocs/skins/fancy/item.php,
	htdocs/skins/fancy/view.css, TODO, lib/common.inc: Add Google +1
	button on items (first draft).
	Minor cleanup.

2011-07-07  Andrew Arensburger  <arensb@moist>

	* lib/net.inc: For now, don't tell me about redirection.

2011-07-06  Andrew Arensburger  <arensb@moist>

	* plugins/xml-dc.php (bug fix): Notice dc:date in RDF feeds,
	leading to fewer feeds bogusly marked as stale.

	* lib/databbase.inc (bug fix): In view.php?id=all, don't display
	inactive feeds. (Largish rewrite.)

	* htdocs/update.php: Include feed title in JSON errors, to make it
	easy to display error messages.

	* htdocs/skins/fancy/view.css: Style for message box.

	* htdocs/skins/fancy/js/status-msg.js: Cleaning up a bit.

	* htdocs/skins/fancy/feeds.jsh: Display an error message when an
	update fails.

	* htdocs/skins/fancy/view.php: Status messages in view.php as
	well.

2011-07-05  Andrew Arensburger  <arensb@moist>
	* htdocs/skins/fancy/index.css, htdocs/skins/fancy/feeds.php,
	htdocs/skins/fancy/js/status-msg.js, htdocs/skins/fancy/view.css,
	htdocs/skins/fancy/feeds.jsh, TODO, MANIFEST: First pass at adding
	status messages.

	* lib/common.inc: If not on a mobile device, set $mobile to false,
	so as not to break old code.

	* htdocs/skins/fancy/feeds.jsh (minor): Trailing space.

2011-06-22  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.jsh (bug fix): 'C' to collapse and 'E'
	to expand all articles showed the wrong content.

	* htdocs/skins/fancy/view.jsh (bug): to-do comment.

	* MANIFEST: Added missing files.

2011-06-18  Andrew Arensburger  <arensb@moist>

	* htdocs/index.php, htdocs/view.php, lib/common.inc: Move mobile
	device recognition out of index.php and view.php, and into
	common.inc.

	* plugins/wordpress.php: Tweak pattern for recognizing
	wordpress.org bugs.

	* htdocs/skins/fancy/view.php: Let's take out the "Clear changes"
	and "Mark all as read" and see what happens. Fewer accidents,
	hopefully.

	* htdocs/index.php: Recognize Android devices from User-Agent.

	* htdocs/skins/fancy/android.css: Fiddle with font size on
	Android.

2011-06-12  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.php, htdocs/skins/fancy/android.css,
	htdocs/skins/fancy/view.css, htdocs/index.php, htdocs/view.php:
	Make view look decent on Android.

2011-06-05  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/fancy/view.php: Check for Android, and set viewport
	accordingly.

2011-06-02  Andrew Arensburger  <arensb@moist>

	* Set last_update when an RSS XML tree has been parsed, so that
	the feed doesn't show up as stale.

	* Make fields line up better in INSERT statement.

2011-05-31  Andrew Arensburger  <arensb@moist>

	* plugins/gocomics.php: Disabled for now, since it doesn't work.

2011-05-30  Andrew Arensburger  <arensb@moist>

	(bug fix): When following <link rel="alternate">, make sure the
	type attribute indicates an RSS/Atom feed before updating
	feed_url.

2011-05-26  Andrew Arensburger  <arensb@moist>

	* lib/net.inc: Trying again to get redirection to work (when a RSS
	feed gets redirected, follow the redirection).

2011-04-26  Andrew Arensburger  <arensb@moist>

	* First steps toward updating feed URL when it changes.

2011-04-22  Andrew Arensburger  <arensb@moist>

	* plugins/google_news.php: Functions for bypassing Google's
	redirect link, for speed and privacy.

	* plugins/enclosure.php: If the first enclosure is an image, put
	it at the top of the article. All other enclosures go at the
	bottom.

	* lib/parse-feed.inc: Don't clean up textInput/title (breaks
	certain titles like "Jesus & Mo", I think). Call post_link hooks
	on links to the article, to allow for bypassing things like
	Google's redirect.

	* lib/net.inc: _http_status() now returns a third field with
	additional data (currently only the ultimate redirect
	destination).

	* htdocs/view.php: abcnews.com has both iPhone and iPad versions
	of their site.

	* htdocs/markitems.php: Get rid of the remnants of the
	text/plain+xml hack for old Firefox.

2011-03-01  Andrew Arensburger  <arensb@moist>

	* Hook for noticing enclosures and adding them to the article.

	* htdocs/skins/fancy/feed-title.php: Show number of unread
	articles, even in "hide details" mode.

	* lib/config.inc.sample: Quote constant when defining it.

	* lib/common.inc: Check whether $NO_AUTH_CHECK is set before
	checking whether it's true.

	* htdocs/skins/fancy/item.php: Don't escape HTML characters in
	title a second time.

2011-02-04  Andrew Arensburger  <arensb@moist>

	* htdocs/editfeed.php: When marking a feed as inactive, don't
	redirect back to it. Go to the feed index.

	* When requesting JSON output and not logged in, return a JSON
	error structure.

	* Show Le Monde's mobile site on iPad.

2011-01-29  Andrew Arensburger  <arensb@moist>

	* On iPhone/iPad, open articles in a new window.

	* Makefile: Make "test" a synonym for "check".

2011-01-17  Andrew Arensburger  <arensb@moist>

	* htdocs/skins/wings/wings.jsh: Use feed_page global variable
	instead of a bunch of local ones. Sort feed items by newest-first.
	Stubs for show_{next,prev}_item().

	* New regexp to get rid of feedburner ads.

	* Trace statements to help diagnose where HTML is being cleaned up
	too much.

	(bug fix): feed last_update wasn't being set correctly.
